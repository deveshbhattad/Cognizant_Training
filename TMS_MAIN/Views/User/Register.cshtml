@model TMS_MAIN.ViewModels.UserRegisterViewModel
@{
    ViewData["Title"] = "Register User";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@section Styles {
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="~/css/admin-dashboard.css" rel="stylesheet" />
    <style>
        .register-container {
            background: #f7f9fb;
            padding: 32px 18px 24px 18px;
            margin: 80px auto 0 auto;
            max-width: 800px;
            border-radius: 14px;
            box-shadow: 0 2px 18px 0 rgba(0,0,0,0.08);
        }

        .card {
            border-radius: 10px;
            box-shadow: 0 1px 7px rgba(0,0,0,0.04);
        }

        .card-header {
            background-color: #007bff;
            color: white;
        }

        .card-footer {
            background-color: #f8f9fa;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        .form-label {
            font-weight: 500;
        }

        #box {
            padding: 20px;
            margin-top: 120px; /* Space below navbar */
        }
    </style>
}

<div class="register-container" id="box">
    <div class="card">
        <div class="card-header">
            <h4 class="mb-0"><i class="fas fa-user-plus me-2"></i> User Registration</h4>
        </div>
        <div class="card-body">
            @if (TempData["SuccessMessage"] != null)
            {
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    @TempData["SuccessMessage"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }

            @if (!ViewData.ModelState.IsValid)
            {
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <div asp-validation-summary="All"></div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }

            <form asp-action="Register" method="post" class="needs-validation" novalidate autocomplete="off">
                @Html.AntiForgeryToken()

                <div class="row g-3">
                    <div class="col-md-6">
                        <label asp-for="Username" class="form-label">Username*</label>
                        <input asp-for="Username" class="form-control" required />
                        <span asp-validation-for="Username" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="Password" class="form-label">Password*</label>
                        <input asp-for="Password" type="password" class="form-control" required />
                        <span asp-validation-for="Password" class="text-danger"></span>
                    </div>
                </div>

                <div class="row g-3 mt-2">
                    <div class="col-md-6">
                        <label asp-for="ConfirmPassword" class="form-label">Confirm Password*</label>
                        <input asp-for="ConfirmPassword" type="password" class="form-control" required />
                        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="Email" class="form-label">Email*</label>
                        <input asp-for="Email" type="email" class="form-control" required />
                        <span asp-validation-for="Email" class="text-danger"></span>
                    </div>
                </div>

                <div class="mt-3">
                    <label asp-for="FullName" class="form-label">Full Name*</label>
                    <input asp-for="FullName" class="form-control" required />
                    <span asp-validation-for="FullName" class="text-danger"></span>
                </div>

                <div class="row g-3 mt-2">
                    <div class="col-md-6">
                        <label asp-for="PhoneNumber" class="form-label">Phone Number*</label>
                        <input asp-for="PhoneNumber" class="form-control" required />
                        <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="Address" class="form-label">Address*</label>
                        <input asp-for="Address" class="form-control" required />
                        <span asp-validation-for="Address" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-check mt-3">
                    <input asp-for="IsAdmin" class="form-check-input" />
                    <label asp-for="IsAdmin" class="form-check-label">Admin User</label>
                    <span asp-validation-for="IsAdmin" class="text-danger"></span>
                </div>

                <div class="mt-4">
                    <button class="btn btn-primary w-100" type="submit">
                        <i class="fas fa-user-plus me-1"></i> Register
                    </button>
                </div>
            </form>
        </div>
        <div class="card-footer text-center">
            <a asp-action="UserList" class="btn btn-link">View User List</a>
        </div>
    </div>
</div>
<br />
<br />

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function () {
            'use strict'
            const forms = document.querySelectorAll('.needs-validation')
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>
}
